<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Playing with Dojo </title>
    <script src="dojo/dojo.js" data-dojo-config="async:1"></script>
    <link rel="stylesheet" href="dijit/themes/claro/claro.css" media="screen">
</head>
<body class="claro">


</body>
<style type="text/css">
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow:hidden;


    }

    #wrapper {
        width: 100%;
        height: 100%;
    }

    .claro .dijitSplitContainer-child, .claro .dijitBorderContainer-child {
        border: none;
    }

    .dijitAccordionTitle{
        width: max-content;
    }
</style>
<script type="text/javascript">
    require(["dijit/layout/BorderContainer","dijit/layout/TabContainer", "app/myContentPane",
                "dijit/layout/AccordionContainer", "dijit/MenuBar", "dijit/MenuBarItem","dojo/router","dojo/on","dojo/dom",
                "dojo/request","dojo/domReady!"],
            function(BorderContainer, TabContainer, ContentPane,
                     AccordionContainer,MenuBar,MenuBarItem,router,on,dom,
                     request){
                var wrapper = new BorderContainer({id:"wrapper"});
                var cpTop = new ContentPane({
                    region:"top",
                    content:""
                })
                wrapper.addChild(cpTop);
                var mainMenu = new MenuBar({id:"mainMenu"});
                mainMenu.addChild(
                        new MenuBarItem({
                            id:"mHome",
                            label:"Home"
                        })
                );
                mainMenu.addChild(
                        new MenuBarItem({
                            id:"mSomePage",
                            label:"SomePage"
                        })
                );
                mainMenu.addChild(
                        new MenuBarItem({
                            id:"mAddTab",
                            label:"AddTab"
                        })
                );
                cpTop.addChild(mainMenu);
                var cpLeft = new ContentPane({
                    region:"left",
                    "class":"leftPane",
                    content:""
                });
                wrapper.addChild(cpLeft);
                var cpContent = new ContentPane({
                    region:"center",
                    id:"content",
                    content:""
                });
                var contentTabs = new TabContainer({
                    id: "contentTabs"
                });
                contentTabs.addChild(
                        new ContentPane({
                            title: "Food",
                            content: "We offer amazing food"
                        })
                );
                contentTabs.addChild(
                        new ContentPane({
                            title: "Drinks",
                            content: "We offer amazing drinks"
                        })
                );
                contentTabs.startup();
                cpContent.addChild(contentTabs);
                wrapper.addChild(cpContent);
                var aContainer = new AccordionContainer();
                aContainer.addChild(
                        new ContentPane({
                            title: "Заголовок дополнительной информации&nbsp1",
                            content: "Дополнительная информация по заголовку 1, может содержать также форму и быть пунктами настройки"
                        })
                );
                aContainer.addChild(
                        new ContentPane({
                            title: "Заголовок дополнительной информации&nbsp2",
                            content: "Дополнительная информация по заголовку 2, может содержать также форму и быть пунктами настройки"
                        })
                );
                aContainer.addChild(
                        new ContentPane({
                            title: "Заголовок дополнительной информации&nbsp3",
                            content: "Дополнительная информация по заголовку 3, может содержать также форму и быть пунктами настройки"
                        })
                );
                cpLeft.addChild(aContainer);
                wrapper.placeAt(document.body);
                wrapper.startup();
                console.log("tabs=",contentTabs);
                router.register("/somepage/",function(evt){
                            evt.preventDefault();
                            request("some.json", {
                                handleAs: "json"
                            }).then(function (data) {
                                console.log(data);
                                dom.byId("content").innerHTML = data.content;

                            });
                        }
                );
                router.startup();

                on(dom.byId("mHome"),"click",function(){
//                    console.log("cont=",cpContent.content);
//                    console.log("tabs=",contentTabs);
                    //  dom.byId("content").innerHTML=contentTabs.domNode;
                    if(cpContent.content!=contentTabs.domNode){cpContent.set("content",contentTabs.domNode);}
                });

                on(dom.byId("mSomePage"),"click",function(){

                    router.go("/somepage/");
                });

                on(dom.byId("mAddTab"),"click",function(){
                    contentTabs.addChild(new ContentPane({}));
                })

            });
</script>
</html>